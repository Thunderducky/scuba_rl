{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/src/js/app.js","webpack:///./client/src/js/camera.js","webpack:///./client/src/js/levels/index.js","webpack:///./client/src/js/levels/test_level.js","webpack:///./client/src/js/levels/test_level2.js","webpack:///./client/src/js/levels/test_level3.js","webpack:///./client/src/js/mapMaker.js","webpack:///./client/src/js/mapRenderer.js","webpack:///./client/src/js/shapes/Point.js","webpack:///./client/src/js/shapes/index.js","webpack:///./client/src/js/shapes/point.js","webpack:///./client/src/js/shapes/rectangle.js","webpack:///./client/src/js/text.js","webpack:///./client/src/js/utils.js"],"names":["Rectangle","Point","Shapes","screen","$","statusbar","sidebarTarget","levels","l","levelBank","console","log","push","urlParams","URLSearchParams","window","location","search","levelIndex","get","Math","min","length","map","camera","Camera","make","player","renderStatus","target","innerHTML","oxygen","maxOxygen","renderSidebar","message","updateTracking","width","height","renderMap","frame","TEXT","tryMovePlayer","direction","cameraBox","_map","mapBox","netMove","add","source","getCell","x","y","destination","containsPoint","wall","hasFloor","lower","ladder","air","hasOxygen","p","getCellNeighbors","some","cell","water","set","start","addTo","equal","exit","printMap","document","onkeydown","e","preventDefaultList","includes","key","preventDefault","onclick","rootEls","path","filter","el","className","rootEl","getAttribute","onmouseover","copy","bounds","setCenter","floor","clampRectangle","test_level","stringToMap","str","lines","trim","split","makeMap","replace","all","getAllFlat","clearedLines","i","letter","setWater","setAir","setLadder","setWall","buildMap","level","levelData","getAll","forEach","line","c","character","join","test_level2","test_level3","makeCell","color","zeroTypes","params","cells","_cells","getPatch","box","_","slice","undefined","neighbors","n","getPatchFlat","flatten","getGraphTraverser","_renderCell","cameraX","cameraY","renderCells","module","exports","changed","value","a","b","from","obj","clamp","upper","t","r","topLeft","rect","topRight","bottomLeft","bottomRight","point","containsRectangle","outer","inner","getCenter","rectangle","centerPoint","clampPoint","rectContainer","rectInsider","Error","netBottomRight","START","OUT_OF_BOUNDS","WALL","AIR_WALK","NO_JUMP","q","querySelector","arr","reduce","total","concat"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/js/app.js\");\n","import { $, flatten } from './utils';\nimport { makeMap, setWater, setAir, setWall, setLadder } from './mapMaker';\nimport { renderMap } from './mapRenderer';\nimport * as TEXT from \"./text\"\nimport Camera from './camera'\n// for some reason the normal import isn't working :P\nimport Shapes from './shapes';\nconst {Rectangle, Point} = Shapes;\n\nimport levelBank from './levels'\n\nconst screen = $(\"#scuba\");\nconst statusbar = $(\"#status_bar\");\nconst sidebarTarget = $(\"#sidebar_target\");\n\nconst levels = [];\nfor(let l in levelBank.levels){\n  console.log(l);\n  levels.push(levelBank.levels[l]);\n}\nconsole.log(levels);\n\nconst urlParams = new URLSearchParams(window.location.search);\nlet levelIndex = +urlParams.get('level') || 0;\nlevelIndex = Math.min(levelIndex, levels.length - 1);\n\n\nlet map = levels[levelIndex]; //levels[levelIndex]; //makeMap({width:50,height:20});\nlet camera = Camera.make(Rectangle.make(0,0,30, 10), map.player);\nconst renderStatus = (map, target) => {\n  target.innerHTML = `Oxygen: ${map.player.oxygen}/ ${map.player.maxOxygen }`;\n}\n\n\n\n\nconst renderSidebar = (message) => {\n  sidebarTarget.innerHTML = message;\n};\nCamera.updateTracking(camera, Rectangle.make(0,0,map.width, map.height));\nrenderMap(map, screen, camera.frame);\nrenderStatus(map, statusbar);\nrenderSidebar(TEXT.START);\n\n\nconst tryMovePlayer = (direction, cameraBox, _map) => {\n  const { player } = _map;\n  const mapBox = Rectangle.make(0, 0, _map.width, _map.height);\n  const netMove = Point.add(player, direction);\n\n  const source = _map.getCell(player.x, player.y);\n  const destination = _map.getCell(netMove.x, netMove.y);\n\n  // destination blockers\n  if(!Rectangle.containsPoint(mapBox, netMove)){\n    renderSidebar(TEXT.OUT_OF_BOUNDS);\n    return false;\n  }\n  if(destination.wall){\n    renderSidebar(TEXT.WALL)\n    return false;\n  }\n\n  const hasFloor = (x,y) => {\n    const lower = _map.getCell(x, y+1);\n    return lower.wall || lower.ladder;\n  };\n\n  if(source.air && !hasFloor(player.x, player.y) && direction.y <= 0){ // potentially allow a diagnol in the future\n    renderSidebar(TEXT.AIR_WALK);\n    return false;\n  }\n  if(source.air && direction.y < 0){\n    renderSidebar(TEXT.NO_JUMP);\n    return false;\n  }\n\n  // HANDLE OXYGEN SUPPLY\n  const hasOxygen = p => [_map.getCell(p.x,p.y), ..._map.getCellNeighbors(p.x,p.y)].some(cell => !cell.water && !cell.wall);\n  if(!hasOxygen(player) && !hasOxygen(netMove)){\n    player.oxygen -= 1;\n    if(player.oxygen < 0){\n      renderSidebar(`\n        You awaken where you once began\n        perhaps wiser than before...`\n      );\n      Point.set(player, map.start);\n      player.oxygen = 10;\n      Camera.updateTracking(camera, Rectangle.make(0,0,_map.width, _map.height));\n      return false;\n    }\n  } else {\n    player.oxygen = player.maxOxygen;\n  }\n  Point.addTo(player, direction);\n\n  if(Point.equal(player, _map.exit)){\n    console.log(\"test\");\n    levelIndex = (levelIndex + 1) % levels.length;\n    console.log(levelIndex);\n    console.log(levels);\n    map = levels[levelIndex];\n    _map = map;\n    levelBank.printMap(_map);\n    console.log(_map);\n    renderSidebar(\"You have won... for now.\")\n    _map.player.oxygen = _map.player.maxOxygen;\n    Point.set(map.player, map.start);\n    camera = Camera.make(Rectangle.make(0,0,30, 10), map.player);\n    Camera.updateTracking(camera, Rectangle.make(0,0,_map.width, _map.height));\n    renderMap(_map, screen, camera.frame);\n  }\n\n\n  // tryMoveCamera(direction, cameraBox, map);\n  Camera.updateTracking(camera, Rectangle.make(0,0,map.width, map.height));\n  return true;\n}\n\n// UI SECTION\ndocument.onkeydown = function(e){\n  const preventDefaultList = [\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\"];\n  if(preventDefaultList.includes(e.key)){\n    e.preventDefault();\n  }\n  switch(e.key){\n    case \"ArrowLeft\":\n      tryMovePlayer(Point.make(-1, 0), camera.frame, map);\n      break;\n    case \"ArrowRight\":\n      tryMovePlayer(Point.make(1,0), camera.frame, map);\n      break;\n    case \"ArrowUp\":\n      tryMovePlayer(Point.make(0,-1), camera.frame, map);\n      break;\n    case \"ArrowDown\":\n      tryMovePlayer(Point.make(0,1), camera.frame, map);\n      break;\n    default:\n      console.log(\"unused key\");\n  }\n  renderMap(map, screen, camera.frame);\n  renderStatus(map, statusbar);\n};\n\n// Helper Function\ndocument.onclick = function(e){\n  const rootEls = e.path.filter(el => el.className === \"cell\");\n  if(rootEls.length > 0){\n    const rootEl = rootEls[0];\n    const x = +rootEl.getAttribute(\"x\");\n    const y = +rootEl.getAttribute(\"y\");\n    console.log(map.getCell(x,y));\n    if(x === map.player.x && y === map.player.y){\n      console.log(\"Player\");\n      console.log(map.player);\n    }\n  }\n}\n\n// TODO: FIXME!\ndocument.onmouseover = function(e){\n  // const rootEls = e.path.filter(el => el.className === \"cell\");\n  // let result = \"\";\n  // if(rootEls.length > 0){\n  //   const rootEl = rootEls[0];\n  //   const x = +rootEl.getAttribute(\"x\") - camera.frame.x;\n  //   const y = +rootEl.getAttribute(\"y\") - camera.frame.y;\n  //   console.log(map.getCell(x, y));\n  //\n  //   const cell = map.getCell(x,y);\n  //   if(cell.air){\n  //     result += \" Air \"\n  //   }\n  //   else if(cell.ladder){\n  //     result += \" Ladder \"\n  //   }\n  //   else if(cell.water){\n  //     result += \" Water \"\n  //   }\n  //   else if(cell.wall){\n  //     result += \" Wall \"\n  //   }\n  //   if(x === map.player.x && y === map.player.y){\n  //     result += \"- Player\";\n  //   }\n  //   if(x === map.exit.x && y === map.exit.y){\n  //     result += \"- Exit\";\n  //   }\n  // }\n  // statusbar.innerHTML = result;\n}\n","import Shapes from './shapes';\nconst {Rectangle, Point} = Shapes;\nconst make = (frame, target) => {\n  return {\n    frame: Rectangle.copy(frame),\n    target // should be a point, but doesn't have to be\n  }\n}\n\nconst updateTracking = (camera, bounds)  => {\n  if(camera.target){\n    if(!Rectangle.containsPoint(bounds, camera.target)){\n      console.log(\"Cannot track target\")\n      console.log(bounds, camera, camera.target)\n      return false;\n    }\n\n    Rectangle.setCenter(camera.frame, camera.target);\n\n    // Avoid problems with cameras with uneven\n    camera.frame.x = Math.floor(camera.frame.x);\n    camera.frame.y = Math.floor(camera.frame.y);\n\n    Rectangle.clampRectangle(bounds, camera.frame);\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexport default {\n  make,\n  updateTracking\n}\n","import { makeMap, makeCell, setWater, setAir, setWall, setLadder } from '../mapMaker';\nimport { flatten } from '../utils';\nimport Shapes from '../shapes';\n// shove an eval in here? probably wouldn't work :P\nimport * as test_level from './test_level';\nimport * as test_level2 from './test_level2';\nimport * as test_level3 from './test_level3';\nconsole.log(test_level);\n\nconst stringToMap = (str) => {\n  const lines = str.trim().split('\\n');\n  const map = makeMap({height: lines.length, width: lines[0].replace(/\\s/g, '').length })\n  const all = map.getAllFlat();\n  const clearedLines = str.replace(/\\s/g, '');\n  for(let i = 0; i < clearedLines.length; i++){\n    const letter = clearedLines[i];\n    const cell = all[i];\n    switch(letter){\n      case '~':\n        setWater(cell);\n        break;\n      case '.':\n        setAir(cell);\n        break;\n      case 'H':\n        setLadder(cell);\n        break;\n      case '=':\n       setWall(cell);\n       break;\n      default:\n        setAir(cell);\n        break;\n    }\n  }\n  return map;\n}\n\nconst buildMap = level => {\n  const map = stringToMap(level.levelData)\n  Shapes.Point.set(map.start, level.start);\n  Shapes.Point.set(map.exit, level.exit);\n  Shapes.Point.set(map.player, map.start);\n  return map;\n}\n\nconst printMap = map => {\n  console.log(\"MAP\");\n  map.getAll().forEach(line => {\n    console.log(line.map(c => c.character).join(\"\"));\n  });\n};\n\n// build more level stuff\n\nexport default {\n  stringToMap,\n  buildMap,\n  printMap,\n  levels: {\n    test_level : buildMap(test_level),\n    test_level2 : buildMap(test_level2),\n    test_level3 : buildMap(test_level3),\n  }\n}\n","export const levelData = `\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ================================================================\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n`;\nexport const start = {x: 2, y: 8};\nexport const exit = {x: 25, y: 8};\n","export const levelData = `\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................................................................\n  ................H===............................................\n  ................H===...!........................................\n  ================================================================\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n`;\n\nexport const start = {x: 2, y: 8};\nexport const exit = {x: 20, y: 8};\n","export const levelData = `\n  ................................\n  .==H==..........................\n  ...H.....======H=====...........\n  ...H...........H................\n  ..====H==......H................\n  ......H........H................\n  ......H........H.....=H.........\n  ~~~~~~H~~~~~~~~H~~~~~=H~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~=~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~=~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~=~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~=~~~~~~~~~~\n  ~~~~~~H~~~~~~~~H~~~~~=~~~~~~~~~~\n  ~~~~~~~~~~~~~~~~~~~~~=H~~~~~~~~~\n`;\n\nexport const start = {x: 2, y: 0};\nexport const exit = {x: 31, y: 13};\n","import { $, flatten } from './utils';\nexport const makeCell = () => {\n  return {\n    color: \"white\",\n    character: \".\",\n    wall: false,\n    ladder: false,\n    water:false,\n    air: true\n  }\n}\n\nconst zeroTypes = cell => {\n  cell.wall =  false,\n  cell.ladder =  false,\n  cell.water = false;\n  cell.air = false;\n};\n\nexport const setWater = cell => {\n  cell.color = \"blue\";\n  cell.character = \"~\";\n  zeroTypes(cell);\n  cell.water = true;\n  return cell;\n};\nexport const setAir = cell => {\n  cell.color = \"white\";\n  cell.character = \".\";\n  zeroTypes(cell);\n  cell.air = true;\n  return cell;\n};\nexport const setWall = cell => {\n  cell.color = \"green\";\n  cell.character = \"=\";\n  zeroTypes(cell);\n  cell.wall = true;\n  return cell;\n};\n\nexport const setLadder = cell => {\n  cell.color = \"red\";\n  cell.character = \"H\";\n  zeroTypes(cell);\n  cell.ladder = true;\n  return cell;\n}\n\nexport const makeMap = (params) => {\n  const cells = [];\n  for(let y = 0; y < params.height; y++){\n    const line = [];\n    for(let x = 0; x < params.width; x++){\n      line.push(makeCell());\n    }\n    cells.push(line);\n  }\n  return {\n    _cells: cells,\n    start: {\n      x: 4,\n      y:2\n    },\n    exit: {\n      x: 10,\n      y: 10\n    },\n    player: {\n      x: 4,\n      y:2,\n      oxygen: 10,\n      maxOxygen: 10\n    },\n    width: params.width,\n    height: params.height,\n    getPatch: function(box){\n      return this._cells\n        .filter((_, y) => y >= box.y && y < box.y + box.height) // calculate in y range)\n        .map(line => line.slice(box.x, box.x + box.width));\n    },\n    getCell: function(x,y){\n      if(y < 0 || y >= this._cells.length){\n        return undefined;\n      }\n      return this._cells[y][x];\n    },\n    getCellNeighbors: function(x,y){\n      const neighbors = [\n        this.getCell(x, y-1),\n        this.getCell(x+1,y),\n        this.getCell(x, y + 1),\n        this.getCell(x - 1, y)\n      ];\n      return neighbors.filter(n => !!n);\n    },\n    getPatchFlat: function(box){\n      return flatten(this.getPatch(box));\n    },\n    getAll: function(){\n      return this._cells.map(l => l);\n    },\n    getAllFlat: function(){\n      return flatten(this._cells.map(l => l));\n    },\n    getGraphTraverser: function(){\n      throw \"Not Implemented Yet\";\n    }\n  }\n}\n","// We'll reorganize this at some point\n\n// LOTS OF REFACTOR TO DO\nconst _renderCell = (map, cell, x, y, cameraX = 0, cameraY = 0) => {\n  if(map.player.x === x + cameraX && map.player.y === y + cameraY){\n    return `<span class=\"cell\"  x=\"${x}\" y=\"${y}\" style=\"color:yellow\">@</span>`\n  } else if (map.exit.x === x + cameraX && map.exit.y === y + cameraY) {\n    return `<span class=\"cell\"  x=\"${x}\" y=\"${y}\" style=\"color:yellow\">!</span>`\n  } else {\n    return `<span class=\"cell\" x=\"${x}\" y=\"${y}\" style=\"color:${cell.color}\">${cell.character}</span>`\n  }\n}\n\nconst renderMap = (map, target, cameraBox) => {\n  const renderCells = cameraBox === undefined ? map.getAll() : map.getPatch(cameraBox);\n  cameraBox = cameraBox || {};\n  cameraBox.x = cameraBox.x || 0;\n  cameraBox.y = cameraBox.y || 0;\n  target.innerHTML = renderCells.map((line, y) => {\n    return line.map((c,x) => _renderCell(map, c, x, y, cameraBox.x, cameraBox.y)).join('');\n  }).join('\\n');\n};\n\nmodule.exports = {\n  renderMap\n};\n","const make = (x,y) => {\n  return {x,y}\n}\nconst copy = p => make(p.x, p.y);\n\nconst set = (changed, value) => {\n  changed.x = value.x;\n  changed.y = value.y;\n  return changed;\n}\nconst add = (a,b) => {\n  return make(a.x + b.x, a.y + b.y)\n}\n\nconst addTo = (changed, value) => {\n  changed.x += value.x;\n  changed.y += value.y;\n  return changed;\n}\n\nconst from = obj => {\n  return make(obj.x, obj.y);\n}\n\nconst equal = (a,b) => {\n  return a.x === b.x && a.y === b.y;\n};\n\nexport default {\n  make,\n  equal,\n  set,\n  copy,\n  from,\n  add,\n  addTo\n}\n","// const pMake =  x,y) => { return {x,y}}\n// export const Point = {\n//   make:,\n//   copy: ({x,y}) => { return {x, y}},\n//   set: (dest, source) => { dest.x = source.x; dest.y = source.y; return dest}\n//   add(a,b) => { }\n// };\n// export const Rectangle = {};\nimport Rectangle from './rectangle';\nimport Point from './point';\n\nexport default {\n  Rectangle,\n  Point\n}\n","const make = (x,y) => {\n  return {x,y}\n}\nconst copy = p => make(p.x, p.y);\n\nconst set = (changed, value) => {\n  changed.x = value.x;\n  changed.y = value.y;\n  return changed;\n}\nconst add = (a,b) => {\n  return make(a.x + b.x, a.y + b.y)\n}\n\nconst addTo = (changed, value) => {\n  changed.x += value.x;\n  changed.y += value.y;\n  return changed;\n}\n\nconst from = obj => {\n  return make(obj.x, obj.y);\n}\n\nconst equal = (a,b) => {\n  return a.x === b.x && a.y === b.y;\n};\n\nexport default {\n  make,\n  equal,\n  set,\n  copy,\n  from,\n  add,\n  addTo\n}\n","import Point from \"./Point\";\n\nconst clamp = (lower, upper, t) => {\n  if(t < lower) return lower;\n  if(t > upper) return upper;\n  return t;\n}\n\n// todo: could it be worth it to give this thing some convenience setters?\nconst make = (x,y, width, height) => {\n  return {x,y,width,height}\n}\n\nconst copy = r => make(r.x, r.y, r.width, r.height);\n\nconst topLeft = rect => Point.make(rect.x, rect.y);\nconst topRight = rect => Point.make(rect.x + rect.width, rect.y);\nconst bottomLeft = rect => Point.make(rect.x, rect.y + rect.height);\nconst bottomRight = rect => Point.make(rect.x + rect.width, rect.y + rect.height);\n\nconst containsPoint = (rect, point) => {\n  return rect.x <= point.x &&\n         rect.x + rect.width > point.x &&\n         rect.y <= point.y &&\n         rect.y + rect.height > point.y;\n}\n\nconst containsRectangle = (outer, inner) => {\n  return containsPoint(outer, topLeft(inner)) &&\n         containsPoint(outer, topRight(inner)) &&\n         containsPoint(outer, bottomLeft(inner)) &&\n         containsPoint(outer, bottomRight(inner));\n}\n\nconst getCenter = (rectangle) => {\n  return Point.make(rectangle.x + rectangle.width/2, rectangle.y + rectangle.height/2);\n};\nconst setCenter = (rectangle, centerPoint) => {\n  Point.set(rectangle, Point.add(centerPoint, Point.make(-rectangle.width/2, -rectangle.height/2)))\n  return rectangle;\n};\n\nconst clampPoint = (rectangle, point) => {\n  point.x = clamp(rectangle.x, rectangle.x + rectangle.width, point.x);\n  point.y = clamp(rectangle.y, rectangle.y + rectangle.height, point.y);\n  return point;\n}\n\n// TODO: Write tests for this one\nconst clampRectangle = (rectContainer, rectInsider) => {\n  if(rectInsider.width > rectContainer.width || rectInsider.height > rectContainer.height){\n    throw new Error(\"cannot clamp a rectangle into a smaller rectangle\");\n  }\n  // We are now guaranteed the insider will fit, now to just determine from what direction\n  // We will start by clamping the topLeft, and then the bottomRight\n  clampPoint(rectContainer, rectInsider);\n  const netBottomRight = clampPoint(rectContainer, bottomRight(rectInsider));\n  Point.set(rectInsider, Point.add(netBottomRight, Point.make(-rectInsider.width, -rectInsider.height)))\n};\n\nexport default {\n  make,\n  copy,\n  getCenter,\n  setCenter,\n  containsPoint,\n  containsRectangle,\n  topLeft,\n  topRight,\n  bottomLeft,\n  bottomRight,\n  clampPoint,\n  clampRectangle\n}\n","export const START =\n`\n    it is wet and dark\n    deep within this hollowed earth\n    you search for an exit.\n`;\n\nexport const OUT_OF_BOUNDS =\n`\n    the world comes to end\n    even everywhere has limits\n    try another way\n`;\n\nexport const WALL =\n`\n    the stone does not care\n    your efforts at movement fail\n    the cold has not left\n`;\n\nexport const AIR_WALK =\n`\n    even though time stand still\n    the future has been secured\n    you are going down\n`\n\nexport const NO_JUMP =\n`\n    you can do so much\n    but even you have limits\n    alas, you can't jump\n`\n","export const $ = q => document.querySelector(q);\nexport const flatten = arr => arr.reduce((total, line) => total.concat(line), []);\n"],"sourceRoot":""}